
/**
 *  Generated by mxmlc 4.0
 *
 *  Package:    
 *  Class:      SourceTab
 *  Source:     F:\codingground\flash\TourDeFlex3\explorer\SourceTab.mxml
 *  Template:   flex2/compiler/mxml/gen/ClassDef.vm
 *  Time:       2017.01.04 21:38:07 JST
 */

package 
{

import flash.accessibility.*;
import flash.debugger.*;
import flash.display.*;
import flash.errors.*;
import flash.events.*;
import flash.events.MouseEvent;
import flash.external.*;
import flash.geom.*;
import flash.media.*;
import flash.net.*;
import flash.printing.*;
import flash.profiler.*;
import flash.system.*;
import flash.text.*;
import flash.ui.*;
import flash.utils.*;
import flash.xml.*;
import mx.binding.*;
import mx.containers.HBox;
import mx.containers.VBox;
import mx.controls.Button;
import mx.controls.Spacer;
import mx.controls.TextArea;
import mx.core.ClassFactory;
import mx.core.DeferredInstanceFromClass;
import mx.core.DeferredInstanceFromFunction;
import mx.core.IDeferredInstance;
import mx.core.IFactory;
import mx.core.IFlexModuleFactory;
import mx.core.IPropertyChangeNotifier;
import mx.core.UIComponentDescriptor;
import mx.core.mx_internal;
import mx.filters.*;
import mx.rpc.events.FaultEvent;
import mx.rpc.events.ResultEvent;
import mx.rpc.http.mxml.HTTPService;
import mx.styles.*;



public class SourceTab
    extends mx.containers.VBox
{

    [Bindable]
	/**
 * @private
 **/
    public var srv : mx.rpc.http.mxml.HTTPService;

    [Bindable]
	/**
 * @private
 **/
    public var ta : mx.controls.TextArea;




private var _documentDescriptor_ : mx.core.UIComponentDescriptor = 
new mx.core.UIComponentDescriptor({
  type: mx.containers.VBox
  ,
  propertiesFactory: function():Object { return {
    childDescriptors: [
      new mx.core.UIComponentDescriptor({
        type: mx.controls.TextArea
        ,
        id: "ta"
        ,
        stylesFactory: function():void {
          this.color = 160;
          this.fontFamily = "Courier";
        }
        ,
        propertiesFactory: function():Object { return {
          editable: false,
          wordWrap: false,
          percentWidth: 100.0,
          percentHeight: 100.0
        }}
      })
    ,
      new mx.core.UIComponentDescriptor({
        type: mx.containers.HBox
        ,
        stylesFactory: function():void {
          this.paddingBottom = 5;
          this.paddingRight = 20;
        }
        ,
        propertiesFactory: function():Object { return {
          percentWidth: 100.0,
          childDescriptors: [
            new mx.core.UIComponentDescriptor({
              type: mx.controls.Spacer
              ,
              propertiesFactory: function():Object { return {
                percentWidth: 100.0
              }}
            })
          ,
            new mx.core.UIComponentDescriptor({
              type: mx.controls.Button
              ,
              events: {
                click: "___SourceTab_Button1_click"
              }
              ,
              propertiesFactory: function():Object { return {
                label: "Copy"
              }}
            })
          ,
            new mx.core.UIComponentDescriptor({
              type: mx.controls.Button
              ,
              events: {
                click: "___SourceTab_Button2_click"
              }
              ,
              propertiesFactory: function():Object { return {
                label: "Copy Link"
              }}
            })
          ,
            new mx.core.UIComponentDescriptor({
              type: mx.controls.Button
              ,
              events: {
                click: "___SourceTab_Button3_click"
              }
              ,
              propertiesFactory: function():Object { return {
                label: "GitHub"
              }}
            })
          ]
        }}
      })
    ]
  }}
})

    /**
     * @private
     **/
    public function SourceTab()
    {
        super();

        mx_internal::_document = this;




        // layer initializers

       
        // properties
        this.percentWidth = 100.0;
        this.percentHeight = 100.0;
        _SourceTab_HTTPService1_i();


        // events












    }

    /**
     * @private
     **/ 
    private var __moduleFactoryInitialized:Boolean = false;

    /**
     * @private
     * Override the module factory so we can defer setting style declarations
     * until a module factory is set. Without the correct module factory set
     * the style declaration will end up in the wrong style manager.
     **/ 
    override public function set moduleFactory(factory:IFlexModuleFactory):void
    {
        super.moduleFactory = factory;
        
        if (__moduleFactoryInitialized)
            return;

        __moduleFactoryInitialized = true;


        // our style settings



                         
    }
 
    /**
     * @private
     **/
    override public function initialize():void
    {
        mx_internal::setDocumentDescriptor(_documentDescriptor_);


        super.initialize();
    }




        import mx.rpc.events.ResultEvent;
        import mx.rpc.events.FaultEvent;
        import mx.controls.Alert;

		public var app:String;
			
        public function set source(file:String):void
        {
            label = file.substring(file.lastIndexOf("/")+1);
            srv.url = file;
            srv.send();
			ta.verticalScrollPosition = 19; // at end of header
        }

        private function resultHandler(event:ResultEvent):void
        {
            var str:String = String(event.result);
            var r:RegExp = new RegExp("\r\n", "gs");
            str = str.replace(r, "\r");
            ta.text = str;
        }

        private function faultHandler(event:FaultEvent):void
        {
            Alert.show("Error loading source file");
        }
			
		private function copyCode():void
        {
        	System.setClipboard(ta.text);
        }
		
		private function copyLink():void
        {
			var linkText:String = "http://flex.apache.org/tourdeflex/?app=" + app;
			
        	System.setClipboard(linkText);
        }
			
		private function viewInGitHub():void
		{
			var gitHubLink:String = "https://github.com/apache/flex-utilities/tree/master/TourDeFlex/TourDeFlex3/src/" + srv.url;
			var urlRequest:URLRequest = new URLRequest(gitHubLink);
			navigateToURL(urlRequest, "_blank");
		}

        



    //  supporting function definitions for properties, events, styles, effects
private function _SourceTab_HTTPService1_i() : mx.rpc.http.mxml.HTTPService
{
	var temp : mx.rpc.http.mxml.HTTPService = new mx.rpc.http.mxml.HTTPService();
	temp.useProxy = false;
	temp.resultFormat = "text";
	temp.addEventListener("result", __srv_result);
	temp.addEventListener("fault", __srv_fault);
	temp.initialized(this, "srv")
	srv = temp;
	mx.binding.BindingManager.executeBindings(this, "srv", srv);
	return temp;
}

/**
 * @private
 **/
public function __srv_result(event:mx.rpc.events.ResultEvent):void
{
	resultHandler(event)
}

/**
 * @private
 **/
public function __srv_fault(event:mx.rpc.events.FaultEvent):void
{
	faultHandler(event)
}

/**
 * @private
 **/
public function ___SourceTab_Button1_click(event:flash.events.MouseEvent):void
{
	copyCode()
}

/**
 * @private
 **/
public function ___SourceTab_Button2_click(event:flash.events.MouseEvent):void
{
	copyLink()
}

/**
 * @private
 **/
public function ___SourceTab_Button3_click(event:flash.events.MouseEvent):void
{
	viewInGitHub()
}







}

}
